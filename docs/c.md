<!--- This file is auto-generated by `make catalog`. Do not edit manually. -->

![Image of the c command execution](img/c.jpg)

* * *
# NAME

C - The Flat Text Calculator

# DESCRIPTION

The **c** script displays the result of the given expression.

# SYNOPSIS

$ c \[_OPTIONS..._\] _EXPRESSIONS_

# EXPRESSIONS

## OPERANDS

### Decimal:

0, -1, 100 ...

### Hexadecimal:

0xf, -0x1, 0x0064 ...

### Constant:

PI (=3.14159265358979)

## OPERATORS

\+ - \* / % \*\* | & ^ ~ ( , ) =

## FUNCTIONS

abs, int, floor, ceil, rounddown, round, roundup, pct, gcd, lcm, min, max, shuffle, first, uniq, sum, avg,
linspace, linstep, rand, log, sqrt, pow, pow\_inv, rad2deg, deg2rad, dms2rad, dms2deg, deg2dms, sin, cos,
tan, asin, acos, atan, atan2, hypot, geo\_radius, radius\_of\_lat\_circle, geo\_distance, geo\_distance\_m,
geo\_distance\_km

# OPTIONS

- -d, --debug

        Enable debug output.

- -v, --verbose

        The intermediate steps of the calculation will also be displayed.

- -r, --rpn

        The expression will be displayed in Reverse Polish Notation,
        but the calculation result will not be shown.

        If you want to display the calculation result,
        please use the --verbose option as well.

- -h, --help

        Display simple help and exit.

# ADVANCED USAGE

## BASIC USE CASE

When you provide a calculation formula, it will display the result.

    $ c 123456-59+123.456*2=
    123643.912

Use parentheses if you want to control the order of operations.

    $ c '123456-(59+123.456)*2='
    123091.088

Using the _-v_ or _--verbose_ option will display the intermediate calculations as well.

    $ c 123456-59+123.456*2= -v
    123456 - 59 = 123397
    123.456 * 2 = 246.912
    123397 + 246.912 = 123643.912
    Formula: '123456 - 59 + 123.456 * 2 ='
        RPN: '123456 59 - 123.456 2 * +'
     Result: 123643.912

You can also specify calculation formulas written in UTF-8.

    $ c １２３，４５６－５９ ＋ １２３．４５６＊２＝
    123643.912

If you simply want to format a mathematical formula that you found on the web,
please use the _-v_ or _--verbose_ option switch.

    $ c '２ ＰＩ １０＝' --verbose
    2 * 3.14159265358979 = 6.28318530717958
    6.28318530717958 * 10 = 62.8318530717958
    Formula: '2 * 3.14159265358979 * 10 ='    <--- HERE
        RPN: '2 3.14159265358979 * 10 *'
     Result: 62.8318530717958

Several functions are also available.

    $ c 'sqrt(power(1920,2)+power(1080,2))='
    2202.9071700823

Example of using the functions.
The candidate values ​​are 10 equally spaced values ​​from 0 to 90 degrees,
and the radians of an arbitrarily selected value are calculated.

    $ ./c 'deg2rad( first( shuffle( linspace( 0, 90, 10 ) ) ) )' -v
    linspace( 0, 90, 10 ) = ( 0, 10, 20, 30, 40, 50, 60, 70, 80, 90 )
    shuffle( 0, 10, 20, 30, 40, 50, 60, 70, 80, 90 ) = ( 10, 80, 60, 40, 30, 90, 50, 70, 20, 0 )
    first( 10, 80, 60, 40, 30, 90, 50, 70, 20, 0 ) = 10
    deg2rad( 10 ) = 0.174532925199433
    Formula: 'deg2rad( first( shuffle( linspace( 0 , 90 , 10 ) ) ) ) ='
        RPN: '# # # # 0 90 10 linspace shuffle first deg2rad'
     Result: 0.174532925199433

If you specify the operands in hexadecimal or use bitwise operators,
the calculation result will also be displayed in hexadecimal.

    $ c '0xfc & 0x10 ='
    16 ( = 0x10 )

There is no option switch to display the calculation results in hexadecimal.
However, you can display it by performing a bitwise '_|\[OR\]_' operation with 0.

    $ c '100|0'
    100 ( = 0x64 )

## STANDARD INPUT (STDIN) MODE

If no calculation formula is specified as an argument,
the program will wait for input from STDIN.
To exit, send an End Of File signal (for example, press Ctrl + D).

    $ c
    ^D

Example of running with the _-v_ or _--verbose_ option:

    $ c --verbose
    0.22*10**(-6)=    <-- INPUT FROM KEYBOARD
    10 ** -6 = 1e-06
    0.22 * 1e-06 = 2.2e-07
    Formula: '0.22 * 10 ** ( -6 ) ='
        RPN: '0.22 10 -6 ** *'
     Result: 0.00000022 ( = 2.2e-07 )
    <-- INPUT FROM KEYBOARD

    sqrt(2)=    <-- INPUT FROM KEYBOARD
    sqrt( 2 ) = 1.4142135623731
    Formula: 'sqrt( 2 ) ='
        RPN: '# 2 sqrt'
     Result: 1.4142135623731
    ^D    <-- INPUT FROM KEYBOARD

By constructing the calculation formula first,
you can easily repeat similar calculations.
For example, when using **sed**:

    $ cat - | sed -u 's/^\(.*\)$/round( (\1+0) * 1.1 , 0 ) =/'
    1028    <-- INPUT FROM KEYBOARD
    round( (1028+0) * 1.1 , 0 ) =
    <-- INPUT FROM KEYBOARD
    round( (+0) * 1.1 , 0 ) =
    ^D    <-- INPUT FROM KEYBOARD

The formula looks fine, so let's pipe it into the _c_ script:

    $ !! | c
    cat - | sed -u 's/^\(.*\)$/round( (\1+0) * 1.1 , 0 ) =/' | c
    1000
    1100    <-- RESULT
    500
    550     <-- RESULT
    998
    1098    <-- RESULT
    ^D

It might be convenient to register it as an alias:

    ex.) ~/.bashrc
    alias ctax="cat - | sed -u 's/^\(.*\)$/round( (\1+0) * 1.1 , 0 ) =/' | c"

## COORDINATE CALCULATION

I think this is a feature that anyone who likes looking at maps will want to use.

Here we use the following coordinates (latitude and longitude):

    ex)
    Madagascar:        degrees: -18.76694, 46.8691
    Galapagos Islands: degrees: -0.3831, -90.42333

Calculate the distance between two points.

    $ c 'geo_distance_km( deg2rad( -18.76694, 46.8691 ),
         deg2rad( -0.3831, -90.42333 ) ) ='
    14907.357977036

The straight-line distance between Madagascar and the Galapagos Islands was found to be 14,907 km.

If you want to specify latitude and longitude in DMS, use dms2rad().
Be sure to include the sign if the value is negative.

    $ c 'geo_distance_km(
         dms2rad( -18, -46,  -0.984000000006233 ), dms2rad( 46, 52, 8.76000000001113 ),
         dms2rad(  -0, -22, -59.16 ), dms2rad( -90, -25, -23.9880000000255 ) ) ='
    14907.357977036

If you record the calculation as shown below,
you can save not only the calculation results but also the calculation method,
which I think will be easy to reuse and convenient.
This is one of the reasons why I wrote this tool.

    $ Madagascar_coord='-18.76694, 46.8691'
    $ Galapagos_Islands_coord='-0.3831, -90.42333'
    $ c "geo_distance_km(
           deg2rad(
             $Madagascar_coord, $Galapagos_Islands_coord
           )
         )"
    14907.357977036
    $

The **c** script was created with the following in mind:

\- It will run with just Perl.

\- The calculation formulas are easy to understand even when read later.

# OPERATORS

- `+`

    Addition. `1 + 2` -> `3`.

- `-`

    Subtraction. `3 - 2` -> `1`.

- `*`

    Multiplication. `1 * 2` -> `2`.

- `/`

    Division. `1 / 2` -> `0.5`.

- `%`

    Modulo arithmetic. `5 % 3` -> `2`.

- `**`

    Exponentiation. `2 ** 3` -> `8`. Similarly, `pow( 2, 3 )`.

- `|`

    Bitwise OR. `0x2 | 0x4` -> `6 ( = 0x6 )`.

- `&`

    Bitwise AND. `0x6 & 0x4` -> `4 ( = 0x4 )`.

- `^`

    Bitwise exclusive or. `0x6 ^ 0x4` -> `2 ( = 0x2 )`.

- `~`

    Bitwise inversion. `~0` -> `0xFFFFFFFFFFFFFFFFFF`.

- `(`

    A symbol that controls the priority of calculations.

- `,`

    The separator that separates function arguments.

- `)`

    A symbol that controls the priority of calculations.

- `=`

    Equals sign. In _c_ script, it has the meaning of terminating the calculation formula,
    but it is not necessary. `1 + 2 =`. Similarly, `1 + 2`.

# FUNCTIONS

- `abs`

    abs( N ). Returns the absolute value of its argument. \[Perl Native\]

- `int`

    int( N ). Returns the integer portion of N. \[Perl Native\]

- `floor`

    floor( N ). Returning the largest integer value less than or equal to the numerical argument. \[POSIX\]

- `ceil`

    ceil( N ). Returning the smallest integer value greater than or equal to the given numerical argument. \[POSIX\]

- `rounddown`

    rounddown( A, B ). Returns the value of A truncated to B decimal places.

- `round`

    round( A, B ). Returns the value of A rounded to B decimal places.

- `roundup`

    roundup( A, B ). Returns the value of A rounded up to B decimal places.

- `pct`

    pct( NUMERATOR, DENOMINATOR \[, DECIMAL\_PLACES \] ). Returns the percentage, rounding the number if DECIMAL\_PLACES is specified.

- `gcd`

    gcd( A,.. ). Returns the greatest common divisor (GCD), which is the largest positive integer that divides each of the operands. \[Math::BigInt::bgcd()\]

- `lcm`

    lcm( A,.. ). Returns the least common multiple (LCM). \[Math::BigInt::blcm()\]

- `min`

    min( A,.. ). Returns the entry in the list with the lowest numerical value. \[List::Util\]

- `max`

    max( A,.. ). Returns the entry in the list with the highest numerical value. \[List::Util\]

- `shuffle`

    shuffle( A,.. ). Returns the values of the input in a random order. \[List::Util\]

- `first`

    first( A,.. ). Returns the head of the set.

- `uniq`

    uniq( A,.. ). Filters a list of values to remove subsequent duplicates, as judged by a DWIM-ish string equality or "undef" test. Preserves the order of unique elements, and retains the first value of any duplicate set. \[List::Util\]

- `sum`

    sum( A,.. ). Returns the numerical sum of all the elements in the list. \[List::Util\]

- `avg`

    avg( A,.. ). Returns the average value of all elements in a list.

- `linspace`

    linspace( _LOWER_, _UPPER_, _COUNT_ \[, _ROUND_\] ).
    Generates a list of numbers from _LOWER_ to _UPPER_ divided into equal intervals by _COUNT_.
    If _ROUND_ is set to true, the numbers are rounded down to integers.

- `linstep`

    linstep( _START_, _STEP_, _COUNT_ ). Generates a list of _COUNT_ numbers that increase from _START_ by _STEP_.

- `rand`

    rand( N ).  Returns a random fractional number greater than or equal to 0 and
    less than the value of N. \[Perl Native\]

- `log`

    log( N ). Returns the natural logarithm (base e) of N. \[Perl Native\]

- `sqrt`

    sqrt( N ). Return the positive square root of N. Works only for non-negative operands. \[Perl Native\]

- `pow`

    pow( A, B ). Exponentiation. "pow( 2, 3 )" -> 8. Similarly, "2 \*\* 3". \[Perl Native\]

- `pow_inv`

    pow\_inv( A, B ). Returns the power of A to which B is raised.

- `rad2deg`

    rad2deg( _RADIANS_ ) -> _DEGREES_. \[Math::Trig\]

- `deg2rad`

    deg2rad( _DEGREES_ \[, _DEGREES_..\] ) -> ( _RADIANS_ \[, _RADIANS_..\] ). \[Math::Trig\]

- `dms2rad`

    dms2rad( _DEG_, _MIN_, _SEC_ \[, _DEG_, _MIN_, _SEC_ ..\] ) -> ( _RADIANS_ \[, _RADIANS_..\] ).

- `dms2deg`

    dms2deg( _DEG_, _MIN_, _SEC_ ) -> decimal degrees (DD).

- `deg2dms`

    deg2dms( _DEGREES_ ) -> ( _DEG_, _MIN_, _SEC_ ).

- `sin`

    sin( _RADIANS_ ). Returns the sine of _RADIANS_. \[Perl Native\]

- `cos`

    cos( _RADIANS_ ). Returns the cosine of _RADIANS_. \[Perl Native\]

- `tan`

    tan( _RADIANS_ ). Returns the tangent of _RADIANS_. \[Math::Trig\]

- `asin`

    asin( N ). The arcus (also known as the inverse) functions of the sine. \[Math::Trig\]

- `acos`

    acos( N ). The arcus (also known as the inverse) functions of the cosine. \[Math::Trig\]

- `atan`

    atan( N ). The arcus (also known as the inverse) functions of the tangent. \[Math::Trig\]

- `atan2`

    atan2( Y, X ). The principal value of the arc tangent of Y / X. \[Math::Trig\]

- `hypot`

    hypot( X, Y ). Equivalent to "sqrt( X \* X + Y \* Y )" except more stable on very large or very small arguments. \[POSIX\]

- `geo_radius`

    geo\_radius( LAT ). Given a latitude (in radians), returns the distance from the center of the Earth to its surface (in meters).

- `radius_of_lat_circle`

    radius\_of\_lat\_circle( LAT ). Given a latitude (in radians), returns the radius of that parallel (in meters).

- `geo_distance`

    geo\_distance( _A\_LAT_, _A\_LON_, _B\_LAT_, _B\_LON_ ). Calculates and returns the distance (in meters) from A to B. Latitude and longitude must be specified in radians. Same as geo\_distance\_m().

- `geo_distance_m`

    geo\_distance\_m( _A\_LAT_, _A\_LON_, _B\_LAT_, _B\_LON_ ). Calculates and returns the distance (in meters) from A to B. Latitude and longitude must be specified in radians. Same as geo\_distance().

- `geo_distance_km`

    geo\_distance\_km( _A\_LAT_, _A\_LON_, _B\_LAT_, _B\_LON_ ). Calculates and returns the distance (in kilometers) from A to B. Latitude and longitude must be specified in radians. Same as geo\_distance\_m() / 1000.

# Environmental requirements

## List of modules used

- Class::Struct — first included in perl 5.004
- constant — first included in perl 5.004
- Encode — first included in perl v5.7.3
- File::Basename — first included in perl 5
- List::Util — first included in perl v5.7.3
- Math::BigInt — first included in perl 5
- Math::Trig — first included in perl 5.004
- POSIX — first included in perl 5
- strict — first included in perl 5
- utf8 — first included in perl v5.6.0
- warnings — first included in perl v5.6.0

## Survey methodology

\- Preparation:

    $ target_script=c

\- 1st. column:

    $ grep '^use ' $target_script | sed 's!^use \([^ ;{][^ ;{]*\).*$!\1!' | \
        sort | uniq | tee ${target_script}.uselist

\- 2nd. column:

    $ cat ${target_script}.uselist | while read line; do
        corelist $line
      done

# SEE ALSO

- [perl](https://metacpan.org/pod/perl)(1)
- [List::Util](https://metacpan.org/pod/List%3A%3AUtil)
- [Math::BigInt](https://metacpan.org/pod/Math%3A%3ABigInt)
- [Math::Trig](https://metacpan.org/pod/Math%3A%3ATrig)
- [POSIX](https://metacpan.org/pod/POSIX)

# AUTHOR

2025, tomyama

# LICENSE

Copyright (c) 2025, tomyama

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1\. Redistributions of source code must retain the above copyright notice,
   this list of conditions and the following disclaimer.
2\. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.
3\. Neither the name of tomyama nor the names of its contributors
   may be used to endorse or promote products derived from this software
   without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

* * *
- See '[README.md](../README.md)' for installation instructions.
- See '[CATALOG.md](CATALOG.md)' for a list and overview of the scripts.
